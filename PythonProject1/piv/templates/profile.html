{% extends 'base.html' %}
{% load static %}

{% block title %}
    –ü—Ä–æ—Ñ–∏–ª—å
{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'css/profile_style.css' %}">
{% endblock %}

{% block content %}
<div class="stats">
    {# ============================== –ü—Ä–æ—Ñ–∏–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è ============================== #}
    <div class="stat-box animate square-box">
        <div class="profile-header">

            <div>
                <img src="{{ user.profile.avatar.url }}" width="200" height="200" border="5" alt="Avatar">
            </div>

            <h2 class="profile-info vertical-layout">
                {{ request.user.full_name }}
                {% if user.profile.age %}
                    <span class="age">{{ user.profile.age }}</span>
                {% endif %}
            </h2>
            <button class="info-btn" onclick="openUserInfoModal()">–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è</button>
        </div>
        <h2>–û —Å–µ–±–µ</h2>
        <br>
        <span>
            {{ user.profile.bio }}
        </span>
    </div>

    {# ============================== –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ ============================== #}
    <div class="stat-box animate rectangle-box skip-box">
        <h2>–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ</h2>
        <div>
            <h3>| –ì–æ—Ä–æ–¥</h3>
            <span>{{ user.profile.city }}</span>
        </div>
        <div>
            <h3>| –î–æ–ª–∂–Ω–æ—Å—Ç—å</h3>
            <span>{{ user.profile.job }}</span>
        </div>
        <div>
            <h3>| –û–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ</h3>
            <span>{{ user.profile.education }}</span>
        </div>
        <div>
            <h3>| –†–æ—Å—Ç</h3>
            <span>{{ user.profile.height }}</span>
        </div>
        <div>
            <h3>| –ó–Ω–∞–∫ –∑–æ–¥–∏–∞–∫–∞</h3>
            <span>{{ user.profile.zodiac_sign }}</span>
        </div>
        <div>
            <h3>| –†–µ–ª–∏–≥–∏—è</h3>
            <span>{{ user.profile.religion }}</span>
        </div>
        <div>
            <h3>| –û—Ç–Ω–æ—à–µ–Ω–∏–µ –∫ –∞–ª–∫–æ–≥–æ–ª—é</h3>
            <span>{{ user.profile.alcohol }}</span>
        </div>
        <div>
            <h3>| –û—Ç–Ω–æ—à–µ–Ω–∏–µ –∫ –∫—É—Ä–µ–Ω–∏—é</h3>
            <span>{{ user.profile.smoking }}</span>
        </div>
        <div>
            <h3>| –ï–©–ï –ß–¢–û –¢–û</h3>
            <span>–∑–∞–ø–æ–ª–Ω–∏—Ç—å</span>
        </div>
    </div>

    {# ============================== –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è ============================== #}
    <div class="stat-box animate rectangle-box skip-box dlc-block">
    <!-- –°–µ–∫—Ü–∏—è —Å —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏—è–º–∏ -->
    <!-- –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–π —à–∞–±–ª–æ–Ω (HTML + Django) -->
    <div class="photos-section">
    <h2>–§–æ—Ç–æ–≥—Ä–∞—Ñ–∏–∏ ({{ profile.photos.count }})</h2>
    <div class="photos-container">
        {% for photo in profile.photos.all|slice:":3" %}
            <div class="{% if forloop.first %}large-photo{% else %}small-photo{% endif %} photo-wrapper">
                <!-- –î–æ–±–∞–≤–ª—è–µ–º –æ–≤–µ—Ä–ª–µ–π –¥–ª—è —Ç—Ä–µ—Ç—å–µ–≥–æ —Ñ–æ—Ç–æ, –µ—Å–ª–∏ —Ñ–æ—Ç–æ –±–æ–ª—å—à–µ 3 -->
                {% if forloop.last and profile.photos.count > 3 %}
                    <div class="blur-container">
                        <img src="{{ photo.image.url }}"
                             alt="–§–æ—Ç–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è {{ profile.user.full_name }}"
                             class="photo-image">
                    </div>
                    <div class="overlay">
                        <span class="plus-icon">+{{ profile.photos.count|add:"-2" }}</span>
                    </div>
                {% else %}
                    <img src="{{ photo.image.url }}"
                         alt="–§–æ—Ç–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è {{ profile.user.full_name }}"
                         class="photo-image">
                {% endif %}
            </div>
        {% empty %}
            <!-- –ü—É—Å—Ç—ã–µ –ø–ª–µ–π—Å—Ö–æ–ª–¥–µ—Ä—ã -->
            <div class="large-photo photo-wrapper">
                <div class="empty-photo-placeholder"></div>
            </div>
            <div class="small-photo photo-wrapper">
                <div class="empty-photo-placeholder"></div>
            </div>
            <div class="small-photo photo-wrapper">
                <div class="empty-photo-placeholder"></div>
            </div>
        {% endfor %}
    </div>
</div>

    <!-- –°–µ–∫—Ü–∏—è "–ò—â—É" -->
    <div class="looking-for">
        <h2>–ò—â—É: {{ profile.get_relationship_goals_display }}</h2>
    </div>

    <!-- –°–µ–∫—Ü–∏—è —É–≤–ª–µ—á–µ–Ω–∏–π -->
    <div class="hobbies">
        <h2>–£–≤–ª–µ—á–µ–Ω–∏—è:</h2>
        <div class="hobbies-list">
            {% for interest in profile.interests.all %}
                <div class="hobby-item">
                    <img src="{{ interest.image.url }}" alt="{{ interest.name }}" class="hobby-img">
                    <span>{{ interest.name }}</span>
                </div>
            {% empty %}
                <span>–ù–µ—Ç –¥–æ–±–∞–≤–ª–µ–Ω–Ω—ã—Ö —É–≤–ª–µ—á–µ–Ω–∏–π</span>
            {% endfor %}
        </div>
    </div>
    </div></div>

    {# ============================== –°—Ç–∞—Ç–∏—Å—Ç–∏—á–µ—Å–∫–∏–µ –±–ª–æ–∫–∏ ============================== #}
    <div class="stat-box animate min-box">
        <div class="three-squares">
            <div class="square">
                <h2>–î—Ä—É–∑—å—è</h2>
                <p class="count">0</p>
            </div>
            <div class="square">
                <h2>–ü–æ–¥–ø–∏—Å—á–∏–∫–∏</h2>
                <p class="count">0</p>
            </div>
            <div class="square">
                <h2>–î–µ–Ω—å–≥–∏</h2>
                <p class="count">0</p>
            </div>
        </div>
    </div>

{# ============================== –ú–æ–¥–∞–ª—å–Ω—ã–µ –æ–∫–Ω–∞ ============================== #}
{# –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –¥–ª—è –ø–æ–¥—Ä–æ–±–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ #}
<div class="info-modal" id="infoModal">
    <div class="info-content">
        <h2>–ü–æ–¥—Ä–æ–±–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è</h2>
        <div class="info-list">
            <div class="info-item">
                <span>–í–æ–∑—Ä–∞—Å—Ç:</span>
                <p id="user-age">–ù–µ —É–∫–∞–∑–∞–Ω–æ</p>
            </div>
            <div class="info-item">
                <span>–ò–Ω—Ç–µ—Ä–µ—Å—ã:</span>
                <p id="user-interests">–ù–µ —É–∫–∞–∑–∞–Ω–æ</p>
            </div>
            <div class="info-item">
                <span>–õ—é–±–∏–º–∞—è –º—É–∑—ã–∫–∞:</span>
                <p id="user-music">–ù–µ —É–∫–∞–∑–∞–Ω–æ</p>
            </div>
        </div>
    </div>
</div>

{# –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –¥–ª—è –≤—ã–±–æ—Ä–∞ –∞–≤–∞—Ç–∞—Ä–∞ #}
<div class="avatar-modal" id="avatarModal">
    <div class="avatar-picker">
        <h3>–í—ã–±–µ—Ä–∏—Ç–µ —Ñ–æ—Ç–æ</h3>
        <div class="avatar-grid">
            <button class="avatar-option">üòÄ</button>
            <button class="avatar-option">üòé</button>
            <button class="avatar-option">üò±</button>
            <button class="avatar-option">ü§™</button>
            <button class="avatar-option">ü§¢</button>
            <button class="avatar-option">üôÉ</button>
            <button class="avatar-option">üòà</button>
            <button class="avatar-option">ü§ñ</button>
            <button class="avatar-option">ü§°</button>
            <button class="avatar-option">üëª</button>
            <button class="avatar-option">üíÄ</button>
            <button class="avatar-option">üí©</button>
        </div>
    </div>
</div>
{% endblock %}
